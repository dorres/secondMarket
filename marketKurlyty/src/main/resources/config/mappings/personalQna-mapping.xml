<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="PersonalQnaDAO">
 
 <!-- 질문들
 	INSERT INTO myboard (seq, title, writer, content)
	VALUES((select nvl(max(seq), 0)+1 from myboard), #{title}, #{writer}, #{content})

  -->
 		
 <!-- insert 글 작성. -->
 	<insert id="insertPersonalQna" parameterType="personalqna">
 		INSERT INTO mk_qna_personal(#{qna_personal_serial},#{user_id},#{admin_name},#{order_detail_order_serial},
 		#{qna_personal_title},#{qna_personal_content},#{qna_personal_date},#{qna_personal_hit},#{qna_personal_lock}#{qna_personal_answer})
 	</insert>
<!-- 질문 : 회원의 글쓰기, 컨트롤러를 구분해서 두개를 작성해야 하나 ?-->
		
	<update id="updatePersonalQna" parameterType="personalqna">
		UPDATE mk_qna_personal SET qna_personal_title = #{qna_personal_title}, qna_personal_content = #{qna_personal_content} 
		WHERE qna_personal_serial = #{qna_personal_serial}
	</update>

	<delete id="deletePersonalQna" parameterType="personalqna">
		DELETE FROM mk_qna_personal WHERE qna_personal_serial = #{qna_personal_serial}
	</delete>

<!-- 1:1 게시글이므로 user_id로 글 찾아 보기 -->
	<select id="getPersonalQna" resultType="personalqna" parameterType="personalqna">
		SELECT * FROM mk_qna_personal WHERE qna_personal_serial = #{qna_personal_serial} 
	</select>
	
<!-- 게시판의 리스트, 별도의 기능 없이 serial의 DESC -->
	<select id="getPersonalQnaList" resultType="personalqna" parameterType="personalqna">
		SELECT * FROM mk_qna_personal WHERE user_id = #{user_id} ORDER BY seq DESC 
																		<!--  날짜로 변경--> 
	</select>

 </mapper> 